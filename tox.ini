[tox]
skipsdist = true
skip_missing_interpreters = true
envlist =
    style
isolated_build = true

[testenv]
# Note: in order to allow dependency library install reuse
# on CI, we allow overriding the default envdir
# (specified as `{toxworkdir}/{envname}`) by setting the
# environment variable `TOX_INSTALL_DIR`. We avoid
# collision with the already-used `TOX_ENV_DIR`.
envdir = {env:TOX_INSTALL_DIR:{toxworkdir}/{envname}}
# Note: we try to keep the deps the same for all tests
# running on CI so that we skip reinstalling dependency
# libraries for all testenvs
deps = -rrequirements.txt

[testenv:example]
description = run tests for the example tutorial
commands =
    python example/example_tutorial.py
    python scripts/check_notebooks.py example/

[testenv:style]
description = check the code style
basepython = python3
commands =
    black --check {toxinidir}
    flake8 {toxinidir}

[testenv:dev]
description = install dev tools
basepython = python3
envdir = {toxinidir}/.env

[testenv:fix]
description = run code stylers
basepython = python3
commands = black {toxinidir}
