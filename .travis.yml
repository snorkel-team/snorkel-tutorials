# Only run CI on master, release branches, tags, and PRs
if: tag IS present OR type = pull_request OR ((branch = master OR branch =~ release-*) AND type = push)

# Main dist is Python
language: python

# Cache package wheels
cache: pip

# python3.7 only available on xenial
dist: xenial

env:
  TOX_INSTALL_DIR=.env

jobs:
  include:
    - name: "Python 3.6: tutorial tests"
      python: 3.6
    - name: "Python 3.7: tutorial tests"
      python: 3.7


install:
  - pip install -U pip setuptools
  - pip install -U tox==3.12.0
  - tox --notest

script:
  # Run all environments except dev and fix
  # This should correspond to style and all tutorial envs
  - tox -e $(tox -a | grep -v -e '^dev$' -e '^fix$'  | paste -sd "," -)
